#!/bin/bash

cutbox=build/Release/cutbox

cd cutbox_command || exit 1
xcodebuild || exit 1

if [[ -e $cutbox ]]; then
    $cutbox --help

    # Add history item via macos defaults write command line:
    defaults write info.ocodo.cutbox historyStore -array-add '<dict>
                                                                  <key>string</key>
                                                                  <string>Test Passed?</string>
                                                              </dict>'

    # Test show history item from cutbox command line...
    if [[ "$($cutbox)" == "Test Passed?" ]]; then
        echo "Test 001 Passed"
    else
        echo "Test 001 Failed"
        exit 1
    fi

    # Test fuzzy filter
    if [[ "$($cutbox zoo)" == "" ]]; then
        echo "Test 002 Passed"
    else
        echo "Test 002 Failed"
        exit 1
    fi

fi
