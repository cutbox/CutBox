#!/bin/bash

cutbox=build/Release/cutbox

cd cutbox_command || exit 1
xcodebuild || exit 1

if [[ -e $cutbox ]]; then
    $cutbox --help

    # Add item to history via command line:
    defaults write info.ocodo.cutbox historyStore -array-add '<dict><key>string</key><string>Test Passed?</string></dict>'

    # Check last history item:
    if [[ "$($cutbox 1)" == "Test Passed?" ]]; then
        echo "Test Passed"
        exit 0
    else
        echo "Test Failed"
        exit 1
    fi
fi
