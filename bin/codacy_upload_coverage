#!/usr/bin/env zsh

xcrun llvm-cov export .build/**/CutBoxUnitTests \
    -instr-profile .build/**/Coverage.profdata \
    -ignore-filename-regex "Pods|Sparkle|CutBoxUnitTests|View" \
    -format=lcov > coverage.lcov

# filter BigIntegers replace with max int value 2147483647
bin/replace_bigints_with_max_int coverage.lcov

bash <(curl -Ls https://coverage.codacy.com/get.sh)
